/*!
* @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
* @version 2.3.0
* bootstrap-fileinput
* For more JQuery Plugins visit http://plugins.krajee.com
*/!function(e){var i='{preview}\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {upload}\n       {browse}\n   </div>\n</div>',t="{preview}\n{remove}\n{upload}\n{browse}\n",n='<div class="file-preview {class}">\n   <div class="close fileinput-remove text-right">&times;</div>\n   <div class="file-preview-thumbnails"></div>\n   <div class="clearfix"></div>   <div class="file-preview-status text-center text-success"></div>\n</div>',a='<div tabindex="-1" class="form-control file-caption {class}">\n   <span class="glyphicon glyphicon-file kv-caption-icon"></span><div class="file-caption-name"></div>\n</div>',r='<div id="{id}" class="modal fade">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3 class="modal-title">Detailed Preview <small>{title}</small></h3>\n      </div>\n      <div class="modal-body">\n        <textarea class="form-control" style="font-family:Monaco,Consolas,monospace; height: {height}px;" readonly>{body}</textarea>\n      </div>\n    </div>\n  </div>\n</div>\n',l='<div class="file-preview-frame" id="{previewId}">\n   {content}\n</div>\n',o='<div class="file-preview-frame" id="{previewId}">\n   <div class="file-preview-text" title="{caption}">\n       {strText}\n   </div>\n</div>\n',s='<div class="file-preview-frame" id="{previewId}" title="{caption}">\n   <object type="application/x-shockwave-flash" data="{media}" width="320" height="240">\n       <param name="movie" value="{media}" />\n       <param name="quality" value="high" />\n   </object>\n</div>\n',p='<div class="file-preview-frame" id="{previewId}" title="{caption}">\n   <video width="320" height="240" controls>\n       <source src="{media}" type="{type}">\n       <small>The video format of "{caption}" is not supported by your browser for preview (must be one mp4, webm, 3gp, ogg).</small>   </video>\n</div>\n',c='<div class="file-preview-frame" id="{previewId}">\n   <div class="file-preview-other">\n       <h2><i class="glyphicon glyphicon-file"></i></h2>\n           {caption}\n   </div>\n</div>',d=function(i,t){return null===i||void 0===i||i==[]||""===i||t&&""===e.trim(i)},m=function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},v=function(i,t,n){return d(i)||d(i[t])?n:e(i[t])},u=function(e,i){return"undefined"!=typeof e?e.match("image.*"):i.match(/\.(gif|png|jpe?g)$/i)},g=function(e,i){return"undefined"!=typeof e?e.match("text.*"):i.match(/\.(txt|md|csv|htm|html|php|ini)$/i)},w=function(e,i){return"undefined"!=typeof e?e.match("video.*"):i.match(/\.(ogg|mp4|webm|3gp|flv)$/i)},f=function(e){return"undefined"!=typeof e&&"application/x-shockwave-flash"==e||e.match(/\.(swf)$/i)},h=function(){return Math.round((new Date).getTime()+100*Math.random())},b=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob},C=window.URL||window.webkitURL,$=function(i,t){this.$element=e(i),b()?(this.init(t),this.listen()):this.$element.removeClass("file-loading")};$.prototype={constructor:$,init:function(e){var n=this;n.reader=null,n.showCaption=e.showCaption,n.showPreview=e.showPreview,n.maxFileSize=e.maxFileSize,n.maxFileCount=e.maxFileCount,n.msgSizeTooLarge=e.msgSizeTooLarge,n.msgFilesTooMany=e.msgFilesTooMany,n.msgFileNotFound=e.msgFileNotFound,n.msgFileNotReadable=e.msgFileNotReadable,n.msgFilePreviewAborted=e.msgFilePreviewAborted,n.msgFilePreviewError=e.msgFilePreviewError,n.msgValidationError=e.msgValidationError,n.msgErrorClass=e.msgErrorClass,n.initialDelimiter=e.initialDelimiter,n.initialPreview=e.initialPreview,n.initialCaption=e.initialCaption,n.initialPreviewCount=e.initialPreviewCount,n.initialPreviewContent=e.initialPreviewContent,n.overwriteInitial=e.overwriteInitial,n.showRemove=e.showRemove,n.showUpload=e.showUpload,n.captionClass=e.captionClass,n.previewClass=e.previewClass,n.mainClass=e.mainClass,n.mainTemplate=d(e.mainTemplate)?n.showCaption?i:t:e.mainTemplate,n.previewTemplate=n.showPreview?e.previewTemplate:"",n.previewGenericTemplate=e.previewGenericTemplate,n.previewImageTemplate=e.previewImageTemplate,n.previewFlashTemplate=e.previewFlashTemplate,n.previewVideoTemplate=e.previewVideoTemplate,n.previewTextTemplate=e.previewTextTemplate,n.previewOtherTemplate=e.previewOtherTemplate,n.captionTemplate=e.captionTemplate,n.browseLabel=e.browseLabel,n.browseIcon=e.browseIcon,n.browseClass=e.browseClass,n.removeLabel=e.removeLabel,n.removeIcon=e.removeIcon,n.removeClass=e.removeClass,n.uploadLabel=e.uploadLabel,n.uploadIcon=e.uploadIcon,n.uploadClass=e.uploadClass,n.uploadUrl=e.uploadUrl,n.msgLoading=e.msgLoading,n.msgProgress=e.msgProgress,n.msgSelected=e.msgSelected,n.previewFileType=e.previewFileType,n.wrapTextLength=e.wrapTextLength,n.wrapIndicator=e.wrapIndicator,n.isError=!1,n.isDisabled=n.$element.attr("disabled")||n.$element.attr("readonly"),d(n.$element.attr("id"))&&n.$element.attr("id",h()),"undefined"==typeof n.$container?n.$container=n.createContainer():n.refreshContainer(),n.$captionContainer=v(e,"elCaptionContainer",n.$container.find(".file-caption")),n.$caption=v(e,"elCaptionText",n.$container.find(".file-caption-name")),n.$previewContainer=v(e,"elPreviewContainer",n.$container.find(".file-preview")),n.$preview=v(e,"elPreviewImage",n.$container.find(".file-preview-thumbnails")),n.$previewStatus=v(e,"elPreviewStatus",n.$container.find(".file-preview-status"));var a=n.initialPreview;n.initialPreviewCount=m(a)?a.length:a.length>0?a.split(n.initialDelimiter).length:0,n.initPreview(),n.original={preview:n.$preview.html(),caption:n.$caption.html()},n.options=e,n.$element.removeClass("file-loading")},listen:function(){var i=this,t=i.$element,n=i.$captionContainer,a=i.$btnFile;t.on("change",e.proxy(i.change,i)),a.on("click",function(){i.clear(!1),n.focus()}),e(t[0].form).on("reset",e.proxy(i.reset,i)),i.$container.on("click",".fileinput-remove:not([disabled])",e.proxy(i.clear,i))},refresh:function(i){var t=this,n=arguments.length?e.extend(t.options,i):t.options;t.init(n)},initPreview:function(){var e=this,i="",t=e.initialPreview,n=e.initialPreviewCount,a=e.initialCaption.length,r="preview-"+h(),l=a>0?e.initialCaption:e.msgSelected.replace(/\{n\}/g,n);if(m(t)&&n>0){for(var o=0;n>o;o++)r+="-"+o,i+=e.previewGenericTemplate.replace(/\{previewId\}/g,r).replace(/\{content\}/g,t[o]);n>1&&0==a&&(l=e.msgSelected.replace(/\{n\}/g,n))}else{if(!(n>0))return a>0?(e.$caption.html(l),void e.$captionContainer.attr("title",l)):void 0;for(var s=t.split(e.initialDelimiter),o=0;n>o;o++)r+="-"+o,i+=e.previewGenericTemplate.replace(/\{previewId\}/g,r).replace(/\{content\}/g,s[o]);n>1&&0==a&&(l=e.msgSelected.replace(/\{n\}/g,n))}e.initialPreviewContent=i,e.$preview.html(i),e.$caption.html(l),e.$captionContainer.attr("title",l),e.$container.removeClass("file-input-new")},clear:function(e){var i=this;if(e&&e.preventDefault(),i.reader instanceof FileReader&&i.reader.abort(),i.$element.val(""),i.resetErrors(!0),e!==!1&&(i.$element.trigger("change"),i.$element.trigger("fileclear")),i.overwriteInitial&&(i.initialPreviewCount=0),i.overwriteInitial||d(i.initialPreviewContent)){i.$preview.html("");var t=!i.overwriteInitial&&i.initialCaption.length>0?i.original.caption:"";i.$caption.html(t),i.$captionContainer.attr("title",""),i.$container.removeClass("file-input-new").addClass("file-input-new")}else i.showFileIcon(),i.$preview.html(i.original.preview),i.$caption.html(i.original.caption),i.$container.removeClass("file-input-new");i.hideFileIcon(),i.$element.trigger("filecleared"),i.$captionContainer.focus()},reset:function(){var e=this;e.clear(!1),e.$preview.html(e.original.preview),e.$caption.html(e.original.caption),e.$container.find(".fileinput-filename").text(""),e.$element.trigger("filereset"),e.initialPreview.length>0&&e.$container.removeClass("file-input-new")},disable:function(){var e=this;e.isDisabled=!0,e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").attr("disabled",!0)},enable:function(){var e=this;e.isDisabled=!1,e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").removeAttr("disabled")},hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},resetErrors:function(e){var i=this,t=i.$previewContainer.find(".kv-fileinput-error");i.isError=!1,e?t.fadeOut("slow"):t.remove()},showError:function(e,i,t,n){var a=this,r=a.$previewContainer.find(".kv-fileinput-error");return d(r.attr("class"))?a.$previewContainer.append('<div class="kv-fileinput-error '+a.msgErrorClass+'">'+e+"</div>"):r.html(e),r.hide(),r.fadeIn(800),a.$element.trigger("fileerror",[i,t,n]),a.$element.val(""),!0},errorHandler:function(e,i){var t=this;switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:t.addError(t.msgFileNotFound.replace(/\{name\}/g,i));break;case e.target.error.NOT_READABLE_ERR:t.addError(t.msgFileNotReadable.replace(/\{name\}/g,i));break;case e.target.error.ABORT_ERR:t.addError(t.msgFilePreviewAborted.replace(/\{name\}/g,i));break;default:t.addError(t.msgFilePreviewError.replace(/\{name\}/g,i))}},loadImage:function(i,t){var n=this,a=e(document.createElement("img"));a.attr({src:C.createObjectURL(i),"class":"file-preview-image",title:t,alt:t,onload:function(){C.revokeObjectURL(a.src)}}),a.width()>=n.$preview.width()&&a.attr({width:"100%",height:"auto"});var r=e(document.createElement("div")).append(a);return r.html()},readFiles:function(e){function i($){if($>=b)return o.removeClass("loading"),void s.html("");var y=v+"-"+$,T=e[$],F=T.name,x=u(T.type,T.name),I=f(T.type,T.name),P=w(T.type,T.name),E=g(T.type,T.name),L=(T.size?T.size:0)/1e3;if(L=L.toFixed(2),t.maxFileSize>0&&L>t.maxFileSize){var R=t.msgSizeTooLarge.replace(/\{name\}/g,F).replace(/\{size\}/g,L).replace(/\{maxSize\}/g,t.maxFileSize);return void(t.isError=t.showError(R,T,y,$))}var S=a.length>0&&"undefined"!=typeof FileReader&&(x||E||I||P);S?(s.html(p.replace(/\{index\}/g,$+1).replace(/\{files\}/g,b)),o.addClass("loading"),l.onerror=function(e){t.errorHandler(e,F)},l.onload=function(e){var i="",n="";if(E){var l=e.target.result;if(l.length>d){var o=h(),s=.75*window.innerHeight,n=r.replace(/\{id\}/g,o).replace(/\{title\}/g,F).replace(/\{body\}/g,l).replace(/\{height\}/g,s);m=m.replace(/\{title\}/g,F).replace(/\{dialog\}/g,"$('#"+o+"').modal('show')"),l=l.substring(0,d-1)+m}i=t.previewTextTemplate.replace(/\{previewId\}/g,y).replace(/\{caption\}/g,F).replace(/\{strText\}/g,l)+n}else if(I){var p=C.createObjectURL(T);i=t.previewFlashTemplate.replace(/\{previewId\}/g,y).replace(/\{caption\}/g,F).replace(/\{media\}/g,p)}else if(P){var p=C.createObjectURL(T);i=t.previewVideoTemplate.replace(/\{previewId\}/g,y).replace(/\{caption\}/g,F).replace(/\{type\}/g,T.type).replace(/\{media\}/g,p)}else i=t.previewImageTemplate.replace(/\{previewId\}/g,y).replace(/\{content\}/g,t.loadImage(T,F));a.append("\n"+i)},l.onloadend=function(){var e=c.replace(/\{index\}/g,$+1).replace(/\{files\}/g,b).replace(/\{percent\}/g,100).replace(/\{name\}/g,T.name);setTimeout(function(){s.html(e)},1e3),setTimeout(function(){i($+1)},1500),n.trigger("fileloaded",[T,y,$])},l.onprogress=function(e){if(e.lengthComputable){var i=parseInt(e.loaded/e.total*100,10),t=c.replace(/\{index\}/g,$+1).replace(/\{files\}/g,b).replace(/\{percent\}/g,i).replace(/\{name\}/g,T.name);setTimeout(function(){s.html(t)},1e3)}},E?l.readAsText(T):l.readAsArrayBuffer(T)):(a.append("\n"+t.previewOtherTemplate.replace(/\{previewId\}/g,y).replace(/\{caption\}/g,F)),n.trigger("fileloaded",[T,y,$]),setTimeout(i($+1),1e3))}this.reader=new FileReader;var t=this,n=t.$element,a=t.$preview,l=t.reader,o=t.$previewContainer,s=t.$previewStatus,p=t.msgLoading,c=t.msgProgress,d=(t.msgSelected,t.previewFileType,parseInt(t.wrapTextLength)),m=t.wrapIndicator,v="preview-"+h(),b=e.length;i(0)},change:function(e){var i,t=this,n=t.$element,a=n.val().replace(/\\/g,"/").replace(/.*\//,""),r=0,l=t.$preview,o=n.get(0).files,s=t.msgSelected,p=d(o)?1:o.length+t.initialPreviewCount;if(t.hideFileIcon(),i=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files,0!==i.length){t.resetErrors(),l.html(""),t.overwriteInitial||l.html(t.initialPreviewContent);var r=i.length;if(t.maxFileCount>0&&r>t.maxFileCount){var c=t.msgFilesTooMany.replace(/\{m\}/g,t.maxFileCount).replace(/\{n\}/g,r);return t.isError=t.showError(c,null,null,null),t.$captionContainer.find(".kv-caption-icon").hide(),t.$caption.html(t.msgValidationError),void t.$container.removeClass("file-input-new")}t.readFiles(o),t.reader=null;var m=p>1?s.replace(/\{n\}/g,p):a;t.isError?(t.$captionContainer.find(".kv-caption-icon").hide(),m=t.msgValidationError):t.showFileIcon(),t.$caption.html(m),t.$captionContainer.attr("title",m),t.$container.removeClass("file-input-new"),n.trigger("fileselect",[p,a])}},initBrowse:function(e){var i=this;i.$btnFile=e.find(".btn-file"),i.$btnFile.append(i.$element)},createContainer:function(){var i=this,t=e(document.createElement("span")).attr({"class":"file-input file-input-new"}).html(i.renderMain());return i.$element.before(t),i.initBrowse(t),t},refreshContainer:function(){var e=this,i=e.$container;i.before(e.$element),i.html(e.renderMain()),e.initBrowse(i)},renderMain:function(){var e=this,i=e.previewTemplate.replace(/\{class\}/g,e.previewClass),t=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,n=e.captionTemplate.replace(/\{class\}/g,t+" kv-fileinput-caption");return e.mainTemplate.replace(/\{class\}/g,e.mainClass).replace(/\{preview\}/g,i).replace(/\{caption\}/g,n).replace(/\{upload\}/g,e.renderUpload()).replace(/\{remove\}/g,e.renderRemove()).replace(/\{browse\}/g,e.renderBrowse())},renderBrowse:function(){var e=this,i=e.browseClass+" btn-file",t="";return e.isDisabled&&(t=" disabled "),'<div class="'+i+'"'+t+"> "+e.browseIcon+e.browseLabel+" </div>"},renderRemove:function(){var e=this,i=e.removeClass+" fileinput-remove fileinput-remove-button",t="";return e.showRemove?(e.isDisabled&&(t=" disabled "),'<button type="button" class="'+i+'"'+t+">"+e.removeIcon+e.removeLabel+"</button>"):""},renderUpload:function(){var e=this,i=e.uploadClass+" kv-fileinput-upload",t="",n="";return e.showUpload?(e.isDisabled&&(n=" disabled "),t=d(e.uploadUrl)?'<button type="submit" class="'+i+'"'+n+">"+e.uploadIcon+e.uploadLabel+"</button>":'<a href="'+e.uploadUrl+'" class="'+e.uploadClass+'"'+n+">"+e.uploadIcon+e.uploadLabel+"</a>"):""}},e.fn.fileinput=function(i){return this.each(function(){var t=e(this),n=t.data("fileinput");n||t.data("fileinput",n=new $(this,i)),"string"==typeof i&&n[i]()})},e.fn.fileinput=function(i){var t=Array.apply(null,arguments);return t.shift(),this.each(function(){var n=e(this),a=n.data("fileinput"),r="object"==typeof i&&i;a||n.data("fileinput",a=new $(this,e.extend({},e.fn.fileinput.defaults,r,e(this).data()))),"string"==typeof i&&a[i].apply(a,t)})},e.fn.fileinput.defaults={showCaption:!0,showPreview:!0,showRemove:!0,showUpload:!0,captionClass:"",previewClass:"",mainClass:"",mainTemplate:null,initialDelimiter:"*$$*",initialPreview:"",initialCaption:"",initialPreviewCount:0,initialPreviewContent:"",overwriteInitial:!0,previewTemplate:n,previewGenericTemplate:l,previewImageTemplate:l,previewFlashTemplate:s,previewVideoTemplate:p,previewTextTemplate:o,previewOtherTemplate:c,captionTemplate:a,browseLabel:"Browse &hellip;",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> &nbsp;',browseClass:"btn btn-primary",removeLabel:"Remove",removeIcon:'<i class="glyphicon glyphicon-ban-circle"></i> ',removeClass:"btn btn-default",uploadLabel:"Upload",uploadIcon:'<i class="glyphicon glyphicon-upload"></i> ',uploadClass:"btn btn-default",uploadUrl:null,maxFileSize:0,maxFileCount:0,msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>. Please retry your upload!',msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>. Please retry your upload!",msgFileNotFound:'File "{name}" not found!',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgValidationError:'<span class="text-danger"><i class="glyphicon glyphicon-exclamation-sign"></i> File Upload Error</span>',msgErrorClass:"file-error-message",msgLoading:"Loading  file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} files selected",previewFileType:"image",wrapTextLength:250,wrapIndicator:' <span class="wrap-indicator" title="{title}" onclick="{dialog}">[&hellip;]</span>',elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null},e(document).ready(function(){var i=e("input.file[type=file]"),t=null!=i.attr("type")?i.length:0;t>0&&i.fileinput()})}(window.jQuery);